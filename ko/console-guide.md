## Network > VPC > 콘솔 사용 가이드

본 문서에서는 콘솔에서 VPC를 다룰 때 필요한 내용을 기술합니다.

## 동영상 가이드
<iframe width="560" height="315" src="https://www.youtube.com/embed/xd-n5oucstg" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>

<iframe width="560" height="315" src="https://www.youtube.com/embed/K4JQjsGopOk" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>

## VPC

VPC는 여러 서브넷을 가질 수 있기 때문에 서브넷을 분할하여 사용하는 경우 충분히 큰 네트워크를 설정해야 합니다. VPC 네트워크를 기술하는 방법은 [CIDR Notation](https://en.wikipedia.org/wiki/Classless_Inter-Domain_Routing)을 사용하여 기술 할 수 있습니다. 모든 VPC는 [프라이빗 네트워크](https://en.wikipedia.org/wiki/Private_network)를 구성할 수 있는 아래 3개의 주소 영역에 있어야 하며 링크 로컬 주소는 사용할 수 없습니다. 또한 적어도 24bit-256개 보다 큰 네트워크 영역을 지정해야 합니다.

### 프라이빗 네트워크

RFC1918 | IP 주소 영역 | 사용 가능한 주소 개수
-------- | ---------- | -----------------
24bit block | 10.0.0.0/8 | 16,777,216
20bit block | 172.16.0.0/12 | 1,047,576
16bit block | 192.168.0.0/16 | 65,536

### 링크 로컬 주소

169.254.0.0/16에 포함되는 65,536개의 IP 주소는 사용할 수 없습니다.

### 예제

예시 | 사용 가능 여부
-------- | ---------- 
10.0.0.0/8 | 사용 가능합니다.
10.0.0.0/16 | 사용 가능합니다.
10.0.0.0/24 | 사용 가능합니다.
10.0.0.0/28 | 사용이 불가합니다. 범위가 너무 작습니다.
172.16.0.0/16 | 사용 가능합니다.
172.16.0.0/8 | 사용이 불가합니다. 사용 가능 범위를 벗어났습니다.
192.168.0.0/16 | 사용 가능합니다. 기본 사용 범위로 지정됩니다.
192.168.0.0/24 | 사용 가능합니다.
192.253.0.0/24 | 사용이 불가합니다. 사용 가능 범위를 벗어났습니다. 

<br>


최초 Compute 와 Network 상품을 사용하면 아래와 같은 항목을 자동으로 구성합니다.

항목 | 이름 | 요약
-------- | ---------- | --------------
VPC | Default Network | 192.168.0.0/16 범위의 VPC 1개가 만들어집니다.
서브넷 | Default Network | 192.168.0.0/24 범위의 서브넷 1개가 만들어집니다.
라우팅 테이블 | vpc-[id] | VPC 아이디의 일부를 이름으로 갖는 라우팅 테이블 1개가 만들어집니다.
인터넷 게이트웨이 | ig-[id] | 라우팅 테이블 아이디의 일부를 이름으로 갖는 인터넷 게이이트웨이 1개가 만들어집니다.
보안 그룹 | default | default라는 이름을 갖는 보안 그룹 1개가 만들어집니다.

초기 구성이 아니라 VPC를 추가하는 경우는 아래 항목을 구성합니다.

항목 | 이름 | 요약
-------- | ---------- | --------------
VPC | 지정한 이름 | 지정한 범위의 VPC 1개가 만들어집니다.
서브넷 | - | 생성되지 않음
라우팅 테이블 | vpc-[id] | VPC 아이디의 일부를 이름으로 갖는 라우팅 테이블 1개가 만들어집니다.
인터넷 게이트웨이 | - | 생성되지 않기 때문에 별도 생성후 연결해야 합니다.
보안 그룹 | - | 추가로 생성되지 않습니다.

VPC와 각 항목의 Quota는 아래와 같습니다.

항목 | 최대값
-------- | ---------- 
VPC | 3
서브넷 | VPC당 10 
인터넷 게이트웨이 | 3 
플로팅 IP | 제한 없음
라우팅 테이블 | VPC당 10 
라우트 | 라우팅 테이블당 10
피어링 | 제한 없음



> [참고]
VPC를 삭제하기 위해서 서브넷을 모두 삭제 할 수 있는 상태에서만 가능하며, 그런 경우라면 서브넷, 라우팅 테이블, 인터넷 게이트웨이와 함께 삭제합니다.

* VPC는 다른 VPC와 완전히 격리되어 트래픽으로부터 안전합니다.

* VPC는 프라이빗 네트워크이기 때문에 인터넷에서 직접 액세스는 불가능합니다.

* VPC 내 모든 요소는 VLAN을 사용할 수 없습니다.

* Region을 넘어서는 트래픽에 대해서는 로컬 통신을 제공하지 않습니다.

* 인터넷 게이트웨이 없이는 VPC 내 모든 인스턴스가 인터넷에 연결되지 않습니다.

* 과도하게 전송되는 "Broadcast, Multicast, Unknown Unicast"는 예고없이 차단될 수 있습니다.


## 서브넷

VPC는 서브넷으로 나누어 작은 네트워크 여러개를 구성할 수 있습니다. 다만 서브넷의 경우에는 VPC 주소 범위에 포함되어야 하며 주소 길이가 같거나 작아야 합니다. 예를 들면 192.168.0.0/16의 경우 192.168.0.0 ~ 192.168.255.255까지 총 65536개의 IP 주소를 사용할 수 있습니다. 또한 가장 작은 서브넷은 28bit이며 이것 보다 작게 구성할 수는 없습니다. 서브넷도 VPC와 같이 CIDR 표기법을 사용합니다.

서브넷이 생성되면 게이트웨이 IP 주소는 자동으로 지정되며 이를 변경 할 수 없습니다. 또한 VPC에 포함된 라우팅 테이블에 자동으로 등록됩니다. 

> [참고]
서브넷 삭제는 인스턴스나 로드 밸런서 등이 포함되어 있지 않은 비어있는 서브넷의 경우에만 가능합니다. 또한 서브넷이 연결되어 있는 라우팅테이블에 해당 서브넷으로 향하는 라우트가 없어야 합니다.

* 인스턴스가 생성되면 지정한 서브넷으로부터 한개의 IP 주소를 할당받습니다. (Fixed IP라고 합니다.)

* 인스턴스가 부팅되면 DHCP를 통하여 IP 주소가 인스턴스에 적용됩니다.

* 서브넷의 주소 범위를 수정할 수 없습니다.

* 같은 VPC 내에서 서로 다른 서브넷의 범위가 중복되거나 겹치게 생성할 수 없습니다.

* 다른 VPC에서는 서브넷의 범위가 중복되거나 겹칠 수 있습니다.

* 인스턴스에 할당된 MAC 주소가 아닌 경우 네트워크 상에서 차단될 수 있습니다. 따라서 VPN 서비스를 인스턴스에서 구동하는 경우 동작하지 않을 수 있습니다.

* 인스턴스에 여러개의 서브넷을 연결하는 경우 인스턴스 내 OS에서 적절한 라우팅 설정이 필요합니다.

* 동일한 VPC 내 두 개의 서브넷은 완전히 격리된 것이 아닙니다. 보안 그룹을 사용하여 인스턴스를 보호하세요.

* 서브넷은 서로 다른 가용성 영역에 걸쳐서 로컬 통신을 지원합니다. 로컬 통신은 과금하지 않습니다.


## 인터넷 게이트웨이

인터넷 게이트웨이는 라우팅 테이블과 연결할 수 있습니다. 프라이빗 네트워크로 만들어진 VPC는 외부 연결이 불가능한데, 인터넷 게이트웨이를 이용하여 인터넷을 액세스 할 수 있습니다. 인터넷으로 연결하기 위해서 각 인스턴스는 "기본 게이트웨이"를 서브넷의 게이트웨이 주소로 설정해야 하는데 TOAST에서는 이를 자동으로 처리합니다. 인터넷 게이트웨이를 생성하는 경우 외부 네트워크를 선택해야 하는데 TOAST에서 현재 "public_network" 1개만 운영하고 있습니다.

* 인터넷 게이트웨이 주소는 인스턴스가 생성되거나 VPC가 인터넷 연결이 요구되는 상태에 자동 할당 되며 임의로 변경할 수 없습니다.

* 인터넷 게이트웨이 주소로 인스턴스에 액세스 할 수 없습니다.

* 인터넷 게이트웨이 조소로 유입되는 트래픽은 전부 차단됩니다.

* 인터넷에 연결된 인스턴스가 인터넷 방향으로 트래픽을 유발하면 사용한 만큼 과금합니다.

* 인스턴스간 로컬 통신에 대해서는 과금하지 않습니다.

### 서버 점검을 위한 인터넷게이트웨이 재시작 가이드

TOAST는 주기적으로 인터넷게이트웨이 서버의 소프트웨어를 업데이트하여 기본 인프라 서비스의 보안과 안정성을 향상시키고 있습니다.
인터넷게이트웨이 서버 점검을 위해 점검 대상 서버에서 구동 중인 인터넷게이트웨이는 재시작을 통해 점검이 완료된 인터넷게이트웨이 서버로 이동해야 합니다.

재시작이 필요한 인터넷게이트웨이는 이름 옆에 **! 재시작** 버튼이 표시되며, 이 버튼을 사용하여 재시작할 수 있습니다.

점검 대상으로 지정된 인터넷게이트웨이가 있는 프로젝트로 이동하여 다음 절차로 재시작을 수행합니다.

1. 점검 대상 인터넷게이트웨이를 확인합니다.
   이름 옆에 **! 재시작** 버튼이 있는 인터넷게이트웨이가 점검 대상 인터넷게이트웨이입니다.
   ![인터넷게이트웨이 점검이미지 001](http://static.toastoven.net/prod_vpc/ConsoleGuide/ig_planned_migration_guide-ko-001.png)
   **! 재시작** 버튼 위에 마우스 커서를 올리면 자세한 점검 일정을 확인할 수 있습니다. 
   ![인터넷게이트웨이 점검이미지 002](http://static.toastoven.net/prod_vpc/ConsoleGuide/ig_planned_migration_guide-ko-002.png)
2. 점검 대상 인터넷게이트웨이를 선택하고 이름 옆에 있는 **! 재시작** 버튼을 클릭합니다.
   재시작이 완료되기 전까지, 점검 대상 인터넷게이트웨이를 사용하는 인스턴스의 인터넷 연결이 차단되므로 서비스에 영향을 주지 않는 시간에 수행하시기 바랍니다. 
   단, 플로팅 IP를 연결한 인스턴스는 인터넷게이트웨이 재시작에 영향을 받지 않습니다.
3. 인터넷게이트웨이 재시작 여부를 묻는 창이 나타나면 **확인** 버튼을 클릭합니다.
   ![인터넷게이트웨이 점검이미지 003](http://static.toastoven.net/prod_vpc/ConsoleGuide/ig_planned_migration_guide-ko-003.png)
4. 상태 표시등이 초록색으로 변하고, **! 재시작** 버튼이 사라질 때까지 대기합니다.
   인터넷게이트웨이 상태 표시등이 변하지 않거나 **! 재시작** 버튼이 사라지지 않는다면 '새로 고침'을 해보시기 바랍니다.
   ![인터넷게이트웨이 점검이미지 004](http://static.toastoven.net/prod_vpc/ConsoleGuide/ig_planned_migration_guide-ko-004.png)

인터넷게이트웨이가 재시작되는 동안에는 해당 인터넷게이트웨이를 조작할 수 없습니다.
인터넷게이트웨이가 정상적으로 재시작되지 않으면 자동으로 관리자에게 보고되며, TOAST에서 별도로 연락을 드립니다.

## 플로팅 IP

인스턴스가 생성되면 지정한 서브넷으로 부터 하나의 IP 주소를 할당 받습니다. 해당하는 IP 주소는 서브넷의 주소이기 때문에 당연히 VPC에 포함됩니다. 이것을 Fixed IP라고 합니다. 이 주소는 프라이빗 네트워크의 주소이기 때문에 인터넷에서 액세스가 불가능합니다. 따라서 외부에서 직접 인스턴스를 액세스 하고 싶다면 외부에서 접근이 가능한 IP 주소를 사용해야 합니다. 플로팅 IP는 인터넷에서 인스턴스를 직접 액세스하기 위해 필요한 기능입니다. 플로팅 IP를 사용하면 해당 주소와 인스턴스가 1:1로 연결되어 인터넷에서 직접 액세스가 가능해집니다. 자세한 내용은 [개요]를 참고하세요.  플로팅 IP를 생성하기 위해서는 외부 네트워크를 선택해야 하는데 TOAST에서 현재 "Public Network" 1개만 운영하고 있습니다. 

> [참고] 인스턴스에 플로팅 IP를 연결하기 위해서는 인스턴스가 포함된 서브넷이 라우팅 테이블과 연결되어 있고, <br>
> 해당 라우팅 테이블이 인터넷 게이트웨이를 통해 인터넷에 연결 되어 있는 경우만 "연결" 동작을 수행할 수 있습니다.

* 플로팅 IP는 생성과 함께 과금이 됩니다. 삭제하기 전까지는 지속적으로 과금됩니다. (인스턴스 연결과는 무관합니다.)

* 플로팅 IP가 연결된다고 해서 Fixed IP가 플로팅 IP로 변경되는 것은 아닙니다.

* 인터넷 방향으로 트래픽이 발생하면 과금합니다.

* 동일 VPC 내 두 인스턴스가 플로팅 IP를 사용하여 통신하게 되면 사용량 만큼 과금합니다.

> [참고] 동일 VPC 내 두 인스턴스가 Fixed IP를 사용하여 로컬 통신을 하게 되면 과금하지 않습니다.

### 여러 개의 네트워크 인터페이스를 갖는 인스턴스에 플로팅 IP 연결하기

여러 개의 네트워크 인터페이스를 갖는 인스턴스는 각 네트워크 인터페이스마다 플로팅 IP를 연결할 수 있습니다. 그러나 첫 번째를 제외한 나머지에 네트워크 인터페이스에 연결한 플로팅 IP로 인스턴스에 접속하기 위해서는 인스턴스의 Routing Rule 설정이 필요합니다.

**TOAST에서 제공하는 공용 Linux 이미지 배포 버전 `2018.12.27` 이상**으로 생성한 인스턴스는 부팅 시 Routing Rule을 자동으로 설정하여 각각의 네트워크 인터페이스에 연결된 모든 플로팅 IP를 통해 접근이 가능합니다. 

인스턴스에 접속 후, 다음과 같이 Routing Rule 설정 여부를 확인할 수 있습니다.
```
$ ip rule
0:      from all lookup local
100:    from { eth0의 IP 주소 } lookup 1
200:    from { eth1의 IP 주소 } lookup 2
300:    from { eth2의 IP 주소 } lookup 3
...
32766:  from all lookup main
32767:  from all lookup default
```
위와 같이 ip rule 명령을 실행했을 때 각 네트워크 인터페이스 별 Routing Rule 설정이 되어 있다면 모든 플로팅 IP를 통해 인스턴스에 접근이 가능합니다.

이 외의 이미지로 생성한 인스턴스는, 다음과 같이 인스턴스 내에 Routing Rule을 설정하여 인스턴스에 연결된 모든 플로팅 IP를 통해 접근하도록 할 수 있습니다.

첫 번째 네트워크 인터페이스(eth0)에 연결된 플로팅 IP를 통해 인스턴스에 접속한 후, 플로팅 IP를 연결하여 접속하려는 나머지 네트워크 인터페이스들에 대해 다음과 같은 명령을 실행합니다.
```
ip rule add from {네트워크 인터페이스 IP 주소}/32 table {테이블 번호} priority {우선순위}
ip route add default via {네트워크 인터페이스의 Default 게이트웨이 주소} table {테이블 번호}
ip route add {네트워크 인터페이스의 서브넷 CIDR} dev {네트워크 인터페이스 이름} table {테이블 번호}
```

예로, 인스턴스가 갖는 네트워크 인터페이스 정보가 다음과 같다고 할 때
```
1: lo: <LOOPBACK,UP,LOWER_UP> mtu 65536 qdisc noqueue state UNKNOWN
    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
    inet 127.0.0.1/8 scope host lo
       valid_lft forever preferred_lft forever
    inet6 ::1/128 scope host
       valid_lft forever preferred_lft forever
2: eth0: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1454 qdisc pfifo_fast state UP qlen 1000
    link/ether fa:16:3e:8d:71:d6 brd ff:ff:ff:ff:ff:ff
    inet 192.168.100.132/24 brd 192.168.100.255 scope global dynamic eth0
       valid_lft 86379sec preferred_lft 86379sec
    inet6 fe80::f816:3eff:fe8d:71d6/64 scope link
       valid_lft forever preferred_lft forever
3: eth1: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1454 qdisc pfifo_fast state UP qlen 1000
    link/ether fa:16:3e:06:96:2f brd ff:ff:ff:ff:ff:ff
    inet 172.16.0.37/24 brd 172.16.0.255 scope global dynamic eth1
       valid_lft 86381sec preferred_lft 86381sec
    inet6 fe80::f816:3eff:fe06:962f/64 scope link
       valid_lft forever preferred_lft forever
4: eth2: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1454 qdisc pfifo_fast state UP qlen 1000
    link/ether fa:16:3e:06:ac:10 brd ff:ff:ff:ff:ff:ff
    inet 10.254.0.90/24 brd 10.254.0.255 scope global dynamic eth2
       valid_lft 86386sec preferred_lft 86386sec
    inet6 fe80::f816:3eff:fe06:ac10/64 scope link
       valid_lft forever preferred_lft forever
```
`eth1`, `eth2` 에 대해 플로팅 IP로 접속하기 위해 아래와 같은 명령을 통해 Routing Rule을 설정합니다.

```
# eth1의 플로팅 IP 접속을 위한 Routing Rule 설정
ip rule add from 172.16.0.37/32 table 2 priority 200
ip route add default via 172.16.0.1 table 2
ip route add 172.16.0.0/24 dev eth1 table 2

# eth2의 플로팅 IP 접속을 위한 Routing Rule 설정
ip rule add from 10.254.0.90/32 table 3 priority 300
ip route add default via 10.254.0.1 table 3
ip route add 10.254.0.0/24 dev eth2 table 3
```
명령 실행 후 다음과 같이 설정된 Routing Rule을 확인할 수 있습니다.

```
$ ip rule													
0:	from all lookup local
200:	from 172.16.0.37 lookup 2 	
300:	from 10.254.0.90 lookup 3 	
32766:	from all lookup main
32767:	from all lookup default

$ ip route show table 2					
default via 172.16.0.1 dev eth1
172.16.0.0/24 dev eth1  scope link

$ ip route show table 3
default via 10.254.0.1 dev eth2
10.254.0.0/24 dev eth2  scope link
```

위 Routing Rule 설정은 인스턴스를 재부팅하면 초기화 되므로, 인스턴스 재부팅 시 Routing Rule이 자동으로 설정되도록 설정하는 것이 좋습니다.

## 보안 그룹

보안 그룹은 인스턴스를 다른 트래픽으로부터 보호할 목적으로 사용합니다. 지정한 트래픽은 허용하고, 나머지 트래픽은 차단하는 '포지티브 시큐리티 모델(positive security model)'을 사용합니다. 

서비스를 처음 시작하면 기본 보안 그룹 하나가 생성되며, 유입되는 모든 트래픽을 차단합니다. 따라서 'ping', 'ssh' 등의 서비스도 사용할 수 없으며 필요한 규칙을 설정해야만 사용할 수 있습니다. 플로팅 IP를 사용한 외부 접근과 사설 IP를 사용한 내부 접근 모두에 동일하게 적용됩니다. 

인스턴스에는 다수의 보안 그룹을 설정할 수 있습니다. 추가로 보안 그룹을 생성하여 여러 개의 규칙을 더하고 이를 인스턴스에 설정하면, 설정된 모든 보안 그룹의 규칙들이 인스턴스에 적용됩니다.

예를 들어 'CONN'이라는 보안 그룹에 '수신 TCP PORT 22', '수신 TCP PORT 23'이라는 규칙이 있고, 'WEB'이라는 보안 그룹에 '수신 TCP PORT 80', '수신 TCP PORT 8080'과 같은 규칙이 있을 때, 하나의 인스턴스에 'CONN', 'WEB' 두 개의 보안 그룹을 설정하면 네 개의 규칙이 함께 적용되어 해당 서비스를 모두 사용할 수 있습니다.


| 항목        | 설명                                                         |
| ----------- | ------------------------------------------------------------ |
| 방향        | 수신은 인스턴스로 유입되는 방향을 의미합니다. 송신은 인스턴스에서 나가는 방향을 의미합니다. |
| Ether Type  | EtherType IP의 버전을 의미합니다. IPv4, IPv6를 지정할 수 있습니다. |
| IP 프로토콜 | 특정한 프로토콜을 지정하거나 전체를 지정할 수 있습니다. 다른 프로토콜 0은 '임의'와 같은 의미로 모든 IP 프로토콜을 허용합니다.       |
| 포트 범위   | L4 프로토콜의 경우 포트의 범위를 지정할 수 있습니다.         |
| 원격        | 보안 그룹 또는 IP 주소 범위를 지정할 수 있습니다. 규칙의 방향이 '송신'이면 목적지가 원격이고, '수신'이면 출발지가 원격입니다. <br>규칙의 방향에 따라 트래픽의 출발지와 목적지를 비교하는데, 보안 그룹을 지정하면 지정된 보안 그룹에 속한 인스턴스의 IP인지를 비교하고, <br>CIDR을 선택하여 IP 주소나 범위를 지정하는 경우에는 설정된 IP 주소나 범위인지를 비교합니다. |
| 설명        | 보안 그룹 규칙에 대한 설명을 기록해 둘 수 있습니다.         |

보안 그룹은 'stateful'로 동작하기 때문에 규칙으로 한 번 연결된 세션은 반대 방향의 규칙이 없더라도 허용됩니다. 

예를 들어 인스턴스로 향하는 TCP 80의 첫 번째 패킷이 '수신 TCP PORT 80' 규칙에 따라 통과되었다면, 인스턴스에서 TCP 80 포트를 출발지로 하여 전송되는 패킷은 차단되지 않습니다. 

다만, 일정 시간 규칙에 부합하는 패킷이 들어오지 않아 세션이 만료되면 반대 방향의 패킷도 차단됩니다. 

기본 보안 그룹에는 인스턴스에서 나가는 모든 트래픽의 규칙이 설정되어 있습니다. 이 규칙을 삭제하지 않는다면, 인스턴스로부터 시작되는 세션은 모두 허용됩니다.

* 규칙은 하나씩 추가하는 것보다 범위를 지정하는 것이 효율면에서 유리합니다.

* 규칙이 증가하면 성능 저하가 발생할 수 있습니다.

* 세션의 상태가 맞지 않는 트래픽은 차단될 수 있습니다.

* 유입 경로와 유출 경로가 다른 비대칭 트래픽은 차단됩니다.

* 목록에 없는 규칙은 정의하여 사용할 수 있습니다. [Well-known port](https://en.wikipedia.org/wiki/List_of_TCP_and_UDP_port_numbers)




## 라우팅 테이블

라우팅 테이블은 VPC와 함께 생성되며 VPC가 삭제되는 경우 함께 삭제됩니다. 라우팅 테이블은 VPC에 복수개가 생성될 수 있으며 기본 라우팅 테이블이 아니라면 명시적으로 삭제할 수 있습니다. 서브넷은 적어도 하나의 라우팅 테이블에 연결되어야 하며, 복수개의 라우팅 테이블이 하나의 인터넷 게이트웨이를 공유할 수 없습니다.

라우팅 테이블 목록을 지정하는 경우 상세 화면에 요약된 정보가 표기되며, "라우트" 탭을 이용하여 경로를 추가할 수 있습니다.

> [참고]
경로를 추가하게 되는 경우 VPC내에 도달 가능한 영역을 지정해야만 추가할 수 있습니다. 그 외에는 실패 메시지가 발생합니다.

* 라우팅 테이블에 포함되는 서브넷의 게이트웨이는 자동으로 추가됩니다.

* "기본 라우팅 테이블"은 삭제할 수 없습니다. VPC 삭제 시 함께 삭제됩니다.

* 서브넷의 게이트웨이와 인터넷 게이트웨이는 라우트 목록에서 삭제할 수 없습니다.

* 라우팅 테이블과 인터넷 게이트웨이 연결을 끊게 되면 인터넷 연결이 끊어집니다.



## 피어링

피어링은 서로 다른 두 개의 VPC를 연결하는 기능입니다. 보통의 경우 VPC는 네트워크 영역이 다르기 때문에 서로 통신이 불가능하며, 플로팅 IP를 이용하여 연결할 수 있으나 이는 네트워크 사용량에 따라 추가 과금됩니다. 따라서 두 개의 VPC를 연결하는 기능을 제공하는데 이를 피어링이라 합니다.

> [참고] 피어링은 서로 다른 두 VPC를 연결합니다. 다른 VPC를 건너서 또 다른 VPC로 연결은 지원하지 않습니다. A <-> B <-> C 연결에서 A와 C는 연결되지 않습니다.

* 두 VPC의 IP 주소 영역은 겹치면 사용할 수 없습니다.<br>
IP 주소 영역이 한쪽이 다른 한쪽과 포함관계가 되어서는 안되며, 이런 경우 피어링 생성이 실패합니다.

* IP 주소 영역의 크기는 무관하며 "기본 라우팅 테이블"에 연결되지 않은 서브넷으로는 통신이 불가능 합니다.

* 피어링은 연결과 동시에 과금됩니다.

* 피어링은 쿼터 제한이 없으나 서브넷 쿼터 1개를 소모합니다.


